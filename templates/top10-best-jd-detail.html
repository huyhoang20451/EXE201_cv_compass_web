<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="../static/favicon.ico">
    <link rel="stylesheet" href="/static/css/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=upload" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <title>Home - CV Compass</title>
</head>
<body style="background-color: #F6FCFF;">
    <!--Bắt đầu phần header-->
    <div class="header">
        <div class="header-logo">
            <img src="/static/images/Screenshot 2025-08-25 150046.png" alt="Logo CV Compass">
        </div>
        <div class="header-menu"> <!-- Menu lựa chọn -->
            <ul>
                <li><a href="/candidate/home-logged-in?username={{username}}">Trang chủ</a></li>
                <li><a href="/candidate/aboutus-logged-in?username={{username}}">Về chúng tôi</a></li>
                <li><a href="/candidate/home-logged-in?username={{username}}">Tìm việc làm</a></li>
                <li><a href="/candidate/ocr-scan-logged-in?username={{username}}">Quét CV bằng OCR</a></li>
                <li><a href="/candidate/pricing-user-loggedin?username={{username}}">Gói dịch vụ</a></li>
            </ul>
        </div>
        <div class="header-actions">
            <!--Chào mừng khi đăng nhập thành công-->
            <p id="welcome-user">Chào mừng, {{username}}!</p>
            <p style="display: flex; align-items: center; background-color: #D1E9F6; padding: 5px 10px; border-radius: 5px;"><img style="width: 20px; height: 20px;" src="/static/images/coin.png" alt="Coin"><strong>{{coin}}</strong></p>
            <script>
              // Hàm load số xu có sẵn trong dữ liệu
              async function fetchCoin() {
                  try {
                      const response = await fetch(`/candidate/get-coin?username={{username}}`);
                      const data = await response.json();
                      if (data.success) {
                          document.querySelector('.header-actions strong').textContent = data.coin;
                      } else {
                          console.error('Lỗi khi lấy số coin:', data.msg);
                      }
                  } catch (error) {
                      console.error('Lỗi mạng khi lấy số coin:', error);
                  }
              }
            windows.onload = fetchCoin;
            </script>
        </div>

        <div class="user-avatar">
            <img onclick="boxAppear()" style="width: 40px; height: 40px; border-radius: 50%;" src="/static/images/user_avatar.png" alt="User Avatar">
        </div>
        <script>
            function boxAppear() {
                const box = document.createElement('div');
                box.style.position = 'absolute';
                box.style.top = '60px';
                box.style.right = '20px';
                box.style.backgroundColor = '#fff';
                box.style.border = '1px solid #ccc';
                box.style.borderRadius = '5px';
                box.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
                box.style.padding = '10px';
                box.innerHTML = `
                    <p><a href="/edit-profile?username={{username}}" style="text-decoration:none;color:#222;">Hồ sơ của tôi</a></p>
                    <p><a href="/mycv-settings?username={{username}}" style="text-decoration:none;color:#222;">CV của tôi</a></p>
                    <p><a href="/system-settings?username={{username}}" style="text-decoration:none;color:#222;">Cài đặt tài khoản</a></p>
                    <p><a href="/home" style="text-decoration:none;color:#222;">Đăng xuất</a></p>
                `;
                document.body.appendChild(box);
                document.addEventListener('click', function handleClickOutside(event) {
                    if (!box.contains(event.target) && event.target !== document.querySelector('.user-avatar img')) {
                        box.remove();
                        document.removeEventListener('click', handleClickOutside);
                    }
                });
            }
        </script>

        <div class="header-nhatuyendung">
           <p class="cau_hoi">Bạn là nhà tuyển dụng?</p>
           <p><a href="/business/business-home" target='_blank'>Đăng tin ngay</a></p>
        </div>
    </div> <!-- kết thúc phần header -->
    <div class="introduction"> <!-- Bắt đầu phần tựa đề -->
        <div class="background_intro">
            <!-- <img src="../img_bgr.png" alt="Introduction Image"> -->
        </div>
    </div> <!-- kết thúc phần tựa đề -->

      <div style="margin: 24px 0 0 32px; font-weight: bold;">Quay lại</div>
  <h2 style="text-align:center; color:#1769aa; font-size:2rem; margin: 18px 0 32px 0;">Top 10 Job Description phù hợp nhất</h2>
  <div class="jd-detail-container">
    <!-- Cột trái: danh sách JD -->
    <div class="jd-list-col">
      {% for job in job_description[:5] %}
      <div class="jd-list-item jd-blur">
        <span class="jd-rank">#{{ loop.index }}</span>
        <div class="jd-info">
          <span class="jd-title">{{ job.company_name }}</span>
          <span class="jd-company">{{ job.job_title }}</span>
          <span class="jd-location">{{ job.location }}</span>
        </div>
      </div>
      {% endfor %}
      
      <!-- JD 6-10 -->
      {% for job in job_description[5:10] %}
      <div class="jd-list-item">
        <span class="jd-rank">#{{ job.id }}</span>
        <div class="jd-info">
          <span class="jd-title">{{ job.company_name }}</span>
          <span class="jd-company">{{ job.job_title }}</span>
          <span class="jd-location">{{ job.location }}</span>
          <span href="/top10-best-jd-detail?job_id={{ job.id }}" class="jd-detail-link">Xem chi tiết &gt;</span>
        </div>
      </div>
      {% endfor %}
    </div>
    <!-- Cột phải: chi tiết JD nổi bật -->
    <div class="jd-detail-col">
      <h3>Chuyên viên Marketing kỹ thuật số</h3>
      <div class="jd-detail-section">
        <span class="section-title">Vị trí:</span> Chuyên viên Marketing kỹ thuật số
      </div>
      <div class="jd-detail-section">
        <span class="section-title">Công ty:</span> Công ty TNHH ABC Digital Solutions
      </div>
      <div class="jd-detail-section">
        <span class="section-title">Địa điểm:</span> 123 Nguyễn Văn Cừ, Quận 5, TP. Hồ Chí Minh
      </div>
      <div class="jd-detail-section">
        <span class="section-title">Mô tả công việc:</span>
        <ul>
          <li>Lập kế hoạch và triển khai các chiến dịch marketing kỹ thuật số (Google Ads, Facebook Ads, Email...)</li>
          <li>Phối hợp với bộ phận thiết kế và nội dung để sản xuất sản phẩm truyền thông</li>
          <li>Theo dõi hiệu quả chiến dịch, phân tích dữ liệu và tối ưu</li>
          <li>Báo cáo kết quả định kỳ cho Trưởng phòng Marketing</li>
        </ul>
      </div>
      <div class="jd-detail-section">
        <span class="section-title">Yêu cầu:</span>
        <ul>
          <li>Tốt nghiệp đại học các ngành Marketing, Truyền thông, Kinh tế...</li>
          <li>Có từ 1-2 năm kinh nghiệm thực tế trong lĩnh vực Digital Marketing</li>
          <li>Thành thạo Google Analytics, Meta Ads Manager, Excel</li>
          <li>Tư duy logic, kỹ năng viết nội dung tốt, chủ động trong công việc</li>
        </ul>
      </div>
      <div class="jd-detail-section">
        <span class="section-title">Quyền lợi:</span>
        <ul>
          <li>Lương: 10 – 15 triệu/tháng (theo năng lực)</li>
          <li>Thưởng theo hiệu suất + tháng 13</li>
          <li>BHXH, BHYT đầy đủ; bữa ăn trưa, gửi xe</li>
          <li>Tham gia các khóa học nội bộ và nâng cao chuyên môn</li>
          <li>Môi trường trẻ trung, sáng tạo, có lộ trình thăng tiến rõ ràng</li>
        </ul>
      </div>
      <div class="jd-detail-section">
        <span class="section-title">Thời gian làm việc:</span>
        <ul>
          <li>Thứ 2 – Thứ 6: 8h30 – 17h30</li>
          <li>Nghỉ Thứ 7 & Chủ nhật</li>
        </ul>
      </div>
      <div class="jd-detail-section">
        <span class="section-title">Cách ứng tuyển:</span>
        <ul>
          <li>Gửi CV về email: tuyendung@abcdigitalvn.com</li>
          <li>Tiêu đề email: [Họ tên] – Ứng tuyển Digital Marketing</li>
        </ul>
      </div>
      <div class="jd-detail-apply">
        <span class="deadline">Hạn nộp hồ sơ: 31/07/2025</span>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#applyModal">Ứng tuyển ngay</button>
        <!-- Modal -->
        <div class="modal fade" id="applyModal" tabindex="-1" aria-labelledby="applyModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="applyModalLabel">Ứng tuyển vị trí Chuyên viên Marketing kỹ thuật số</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="mb-3">
                    <label for="applicantName" class="col-form-label">Họ và tên:</label>
                    <input type="text" class="form-control" id="applicantName">
                  </div>
                  <div class="mb-3">
                    <label for="applicantEmail" class="col-form-label">Email:</label>
                    <input type="email" class="form-control" id="applicantEmail">
                  </div>
                  <div class="mb-3">
                    <label for="applicantPhone" class="col-form-label">Số điện thoại:</label>
                    <input type="text" class="form-control" id="applicantPhone">
                  </div>
                  <div class="mb-3">
                    <label for="applicantCV" class="col-form-label">Đính kèm CV:</label>
                    <input type="file" class="form-control" id="applicantCV">
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary">Gửi hồ sơ</button>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="unlock-top10">
        <span class="unlock-title">Mở khóa top 10 JD</span>
        <br>
        <button onclick="unlockTop5JD()" style="background-color: #3674B5; color: white; border: none; border-radius: 5px; padding: 10px 20px; cursor: pointer;" class="unlock-btn">Mở khóa ngay Top 5 JD phù hợp</button>
      </div>
    </div>
    <script>
            function unlockTop5JD() {
                // Lấy số xu hiện tại từ header
                const coinElem = document.querySelector('.header-actions strong');
                let totalCoins = Number(coinElem.textContent);
                if (totalCoins >= 5) {
                    const coinRemain = totalCoins - 5;
                    coinElem.textContent = coinRemain;
                    localStorage.setItem('user_coins', coinRemain); // lưu lại số xu mới
                    alert("Bạn đã mở khóa thành công Top 5 JD!");
                    // Mở khóa top 5 JD: bỏ hiệu ứng mờ
                    document.querySelectorAll('.jd-blur').forEach(function(item) {
                        item.classList.remove('jd-blur');
                    });
                } else {
                    alert("Bạn không đủ coin để mở khóa Top 5 JD.");
                }
            }
    </script>
  </div>

</body>